# Final System: Musl
# This section is done in Chroot environment

./configure --prefix=/usr

make && make install

# Create link for ldd
ln -sv /lib/ld-musl-x86_64.so.1 /bin/ldd

# Create config for dynamic library loading:
cat > /etc/ld-musl-x86_64.path << "EOF"
/lib
/usr/local/lib
/usr/lib
EOF

# If desired, install legacy compatability headers:
cp -v musl-legacy-compat-void/cdefs.h /usr/include/sys/
cp -v musl-legacy-compat-void/queue.h /usr/include/sys/
cp -v musl-legacy-compat-void/tree.h /usr/include/sys/
